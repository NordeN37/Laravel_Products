function megMenuInit(){$(".megamenu").on("click",function(a){a.stopPropagation()})}var insertAppend=true;var ajaxContainer=$(".js-pagination-ajax_content");function ajaxPagination(){$(".js-pagination a").click(function(f){f.preventDefault();var d=$(".js-pagination .page-item:not(.disabled).active").index(),c=$(this).parent().index();if(c===0){c=d-1}if(c<d){var b=$(".js-page-"+c);if(typeof(b)!=="undefined"&&b.lenth){setTimeout(function(){var e=b.offset().top-100;$("html, body").animate({scrollTop:e},500)},1500);insertAppend=true;return false}else{insertAppend=false}}var a=$(this).attr("href");$.ajax({url:a,type:"GET",error:function(g){console.log(g);window.location=a},beforeSend:function(){if(!insertAppend){var e=ajaxContainer.offset().top-100;$("html, body").animate({scrollTop:e},AjaxDuration)}},success:function(g){if(!insertAppend){setTimeout(function(){appendHtml(g.content,insertAppend)},AjaxDuration+300)}else{appendHtml(g.content,insertAppend)}var e=a.split("?page="),h=e[1].split("&");if(h=="1"){a=e[0]}history.pushState(null,null,a);$(".js-pagination").html(g.pagination);ajaxPagination()}})})}var loaderManagerElementId="#loader-manager";var loadAjax=false;function initScrollingLoad(){$loadManager=$(loaderManagerElementId);$(window).scroll(function(){if(($(window).scrollTop()+$(window).height()>$(document).height()-distanceFromBottomToStartLoad)&&!loadAjax){loadAjax=true;setTimeout(function(){var a=$(".js-pagination .page-item.active").next().find("a").attr("href");if(typeof(a)!=="undefined"){sendAjax(a)}},30)}})}function sendAjax(a,b){$.ajax({type:"GET",url:a,dataType:"json"}).done(function(c){appendHtml(c.content,insertAppend);$(".js-pagination").html(c.pagination);if(c.finished){stopLoadTrying()}loadAjax=false;if(c.success){ajaxPagination()}else{console.log("Пришли не те данные!")}}).fail(function(){loadAjax=false;console.log("Ошибка выполнения запроса!")})}function appendHtml(a){if(insertAppend){ajaxContainer.append(a)}else{ajaxContainer.html(a);initScrollingLoad()}if(typeof DISQUSWIDGETS!="undefined"){DISQUSWIDGETS.getCount({reset:true})}}function stopLoadTrying(){$(window).off("scroll")}function scrollTopButtonInit(){$(window).scroll(function(){if($(window).scrollTop()>100){$("#scroll_top").show()}else{$("#scroll_top").hide()}});$("#scroll_top").click(function(){$("html, body").animate({scrollTop:0},600);return false})}$(document).ready(function(){megMenuInit();ajaxPagination();initScrollingLoad();multiImagesInit()});